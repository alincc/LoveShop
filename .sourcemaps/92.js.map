{"version":3,"sources":["../../src/spa/+screens/benefits/buy/buySpecSavers/buySpecSavers.module.ts","../../src/spa/+screens/benefits/buy/buySpecSavers/buySpecSavers.ts"],"names":[],"mappings":"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","file":"92.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BuySpecSaversPage } from './buySpecSavers';\n\n@NgModule({\n  declarations: [BuySpecSaversPage],\n  imports: [IonicPageModule.forChild(BuySpecSaversPage)],\n  exports: [BuySpecSaversPage]\n})\nexport class BuySpecSaversPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/spa/+screens/benefits/buy/buySpecSavers/buySpecSavers.module.ts","import { Component } from '@angular/core';\nimport { NavController, IonicPage, NavParams } from 'ionic-angular';\nimport { InAppBrowser } from \"@ionic-native/in-app-browser\";\nimport { RouteManagerService } from \"../../../../framework/services/routeManager/routeManager.service\";\nimport $ from 'jquery';\nimport { AppConfig as app } from \"../../../../framework/appConfig\";\nimport { Platform } from 'ionic-angular';\n\ndeclare var window: any;\ndeclare var cordova: any;\n\nconst BASE_URL = 'https://www.love2shop.co.uk';\n\n@IonicPage()\n@Component({\n  selector: 'page-buySpecSavers',\n  templateUrl: 'buySpecSavers.html',\n  providers: [\n    InAppBrowser\n  ]\n})\nexport class BuySpecSaversPage {\n  benefit: any;\n  showLink: boolean = false;\n  baseResourceUrl;\n  constructor(\n    public navCtrl: NavController,\n    private iab: InAppBrowser,\n    public routeManager: RouteManagerService,\n    public platform: Platform,\n    public navParams: NavParams) {\n    this.baseResourceUrl = app.Configuration.HttpService.baseResourceUrl;\n  }\n\n  ionViewWillLeave() {\n    $('.app-root').removeClass('not-show-tab');\n  }\n\n  onClickBenefitLink() {\n    if (!this.benefit || !this.benefit.url) {\n      return;\n    }\n\n    if (this.benefit.type.toLowerCase() === 'form' && this.benefit.hiddenFields && this.benefit.hiddenFields.fv_value) {\n      let YourPostURL = this.benefit.url;\n      let YourValue1 = this.benefit.hiddenFields.fv_value;\n      var pageContent = '<html><head></head><body><form id=\"loginForm\" action=\"' + YourPostURL + '\" method=\"post\">' +\n        '<input type=\"hidden\" name=\"fv_value\" value=\"' + YourValue1 + '\">' +\n        '</form> <script type=\"text/javascript\">document.getElementById(\"loginForm\").submit();</script></body></html>';\n      var pageContentUrl = 'data:text/html;base64,' + btoa(pageContent);\n\n      this.platform.ready().then(() => {\n        if (cordova && cordova.InAppBrowser) {\n          window.open = cordova.InAppBrowser.open(\n            pageContentUrl,\n            \"_blank\",\n            \"hidden=no,location=yes,clearsessioncache=yes,clearcache=yes\"\n          );\n        }\n      });\n    } else {\n      const url = this._normalizeUrl(this.benefit.url);\n      const browser = this.iab.create(url, \"_system\", \"location=true\");\n    }\n  }\n\n  private _normalizeUrl(url) {\n    if (url.startsWith('#') || url.startsWith('/#')) {\n      return;\n    }\n\n    if (!url.startsWith('http://') && !url.startsWith('https://')) {\n      if (url.startsWith('/')) {\n        return BASE_URL + url;\n      }\n      if (url.startsWith('mycard')) {\n        return BASE_URL + '/manage/' + url;\n      }\n      return 'http://' + url;\n    }\n\n    return url;\n  }\n\n  ionViewWillEnter() {\n    $('.app-root').addClass('not-show-tab');\n    if (this.routeManager.ifNotLoggedInThenGoBackToLoginScreen() === false) {\n      if (this.navParams.get('benefit')) {\n        let benefit = this.navParams.get('benefit');\n        benefit = this._selectBenefitImage(benefit);\n        this.showLink = this._checkCanShowLink(benefit);\n        benefit = this._validContentImg(benefit);\n        this.benefit = benefit;\n      }\n    }\n  }\n\n  private _checkCanShowLink(benefit) {\n    return benefit && benefit.url && this._validUrl(benefit.url);\n  }\n\n  private _validUrl(url: string): boolean {\n    return url && typeof url === 'string' && (url.startsWith('http://') || url.startsWith('https://') || url.startsWith('/') || url.startsWith('mycard'));\n  }\n\n  private _selectBenefitImage(benefit) {\n    if (benefit && Array.isArray(benefit.images)) {\n      benefit.image = benefit.images[0];\n    }\n    return benefit;\n  }\n\n  private _validContentImg(benefit) {\n    if (benefit && benefit.longDescription) {\n      benefit.longDescription = benefit.longDescription.replace(/src=\"\\//g, 'src=\"https://www.love2shop.co.uk/');\n    }\n    return benefit;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/spa/+screens/benefits/buy/buySpecSavers/buySpecSavers.ts"],"sourceRoot":""}