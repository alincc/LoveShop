{"version":3,"sources":["../../src/spa/+screens/whereToSpend/where2SpendOnline/where2SpendOnline.ts","../../src/spa/+screens/whereToSpend/where2SpendOnline/where2SpendOnline.module.ts","../../src/spa/+screens/whereToSpend/where2SpendSharingData.services.ts","../../src/spa/+screens/whereToSpend/where2Spend.services.ts"],"names":[],"mappings":"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","file":"43.js","sourcesContent":["import { Component } from '@angular/core';\nimport { IonicPage, NavController, ViewController } from 'ionic-angular';\nimport { RouteManagerService } from \"../../../framework/services/routeManager/routeManager.service\";\nimport { Subscription } from \"rxjs/Subscription\";\nimport { ONLINE, RetriveRetailerRequest, VIRTUAL_MASTERCARD, Where2SpendServices } from \"../where2Spend.services\";\nimport { Where2SpendSharingDataService } from \"../where2SpendSharingData.services\";\nimport { AuththenticationGuardService } from \"../../../framework/login/authenticationGuard.service\";\nimport { ToastMessageService } from \"../../../framework/services/toastMessageService/toastMessage.service\";\nimport { InAppBrowser } from \"@ionic-native/in-app-browser\";\nimport { LoadingIndicatorService } from \"../../../framework/services/loadingIndicatorService/loadingIndicator.service\";\nimport { AppConfig as app } from \"../../../framework/appConfig\";\nimport { MobileDeviceService } from '../../../framework/services/mobileDeviceService/mobileDeviceService.service';\n\nconst DEFAULT_ERROR_MSG = app.Configuration.HttpService.DEFAULT_ERROR_MSG;\n\n@IonicPage()\n@Component({\n    selector: 'page-where2SpendOnline',\n    templateUrl: 'where2SpendOnline.html',\n    providers: [\n        Where2SpendServices,\n        InAppBrowser\n    ]\n})\nexport class Where2SpendOnlinePage {\n    opemMsCardSub: Subscription;\n    retailers: any[];\n    gpsAvailable: any = true;\n    isLogin: boolean;\n    retailerSub: Subscription;\n    categories: any;\n    location: any;\n    card: any;\n    gotoStore: any = false;\n    imageBaseUrl = 'https://www.love2shop.co.uk';\n\n    constructor(public routeManager: RouteManagerService,\n        public navCtrl: NavController,\n        private viewCtrl: ViewController,\n        private iab: InAppBrowser,\n        private authService: AuththenticationGuardService,\n        private where2SpendServices: Where2SpendServices) {\n    }\n\n    ionViewDidLoad() {\n        this.loadInitialData();\n    }\n\n    gotoPreviousPage() {\n        if (Where2SpendSharingDataService.getInstance()) {\n            let needBackToYourCard = Where2SpendSharingDataService.getInstance().needBackToYOurCardDetail;\n            if (needBackToYourCard) {\n                const index = this.viewCtrl.index;\n                this.navCtrl.remove(index);\n                Where2SpendSharingDataService.getInstance().needBackToYOurCardDetail = false;\n                this.gotoStore = false;\n                this.navCtrl.parent.select(0);\n            } else {\n                this.navCtrl.pop();\n            }\n        }\n    }\n\n    ionViewWillEnter() {\n        this._resetData();\n        this.card = Where2SpendSharingDataService.getInstance().selectedCard;\n        this.location = Where2SpendSharingDataService.getInstance().currenrLocation;\n        this.categories = Where2SpendSharingDataService.getInstance().categories;\n        this.gpsAvailable = Where2SpendSharingDataService.getInstance().gpsStatus;\n        this.isLogin = !!localStorage.getItem('token');\n        this._updateData();\n    }\n\n    checkIsLogin() {\n        return !!localStorage.getItem('token');\n    }\n\n    gotoVirtalMsCard() {\n        this.gotoStore = true;\n        if (this.opemMsCardSub) {\n            this.opemMsCardSub.unsubscribe();\n        }\n        const body: RetriveRetailerRequest = { requestType: VIRTUAL_MASTERCARD };\n        this.opemMsCardSub = this.where2SpendServices.retriveRetailerLocation(body).subscribe(res => {\n            if (res && res.response && res.response.link) {\n                let url = res.response.link;\n                const browser = this.iab.create(url, \"_system\", \"location=true\");\n            } else {\n            }\n        }, (err) => {\n        })\n    }\n\n    ionViewDidLeave() {\n        if (this.retailerSub) {\n            this.retailerSub.unsubscribe();\n        }\n        if (Where2SpendSharingDataService.getInstance() && !this.gotoStore) {\n            Where2SpendSharingDataService.getInstance().needBackToYOurCardDetail = false;\n            this.gotoStore = false;\n            this.navCtrl.popToRoot();\n        }\n    }\n\n    gotoChangeCard() {\n        Where2SpendSharingDataService.getInstance().needBackToYOurCardDetail = false;\n        this.navCtrl.parent.select(1);\n    }\n\n    gotoInStorePage() {\n        this.gotoStore = true;\n        Where2SpendSharingDataService.getInstance().keepLocation = true;\n        this.navCtrl\n            .push('Where2SpendInStoreMapPage')\n            .then(() => {\n                const index = this.navCtrl.getActive().index - 1;\n                this.navCtrl.remove(index);\n            });\n    }\n\n    loadInitialData() {\n        this.updateRetailer();\n    }\n\n    private _alphabetSortFn(store1, store2) {\n        if (store1.name < store2.name) return -1;\n        if (store1.name > store2.name) return 1;\n        return 0;\n    }\n\n    private _updateData() {\n        if (this.card) {\n            this.updateRetailer();\n        }\n    }\n\n    onStoreClick(store) {\n        if (store && store.websiteURL) {\n            const url = this._normalizeUtl(store.websiteURL);\n            const browser = this.iab.create(url, \"_system\", \"location=true\");\n        }\n    }\n\n    private _normalizeUtl(url) {\n        if (!url || !url.startsWith('http://') || !url.startsWith('https://')) {\n            return 'http://' + url;\n        }\n\n        return url;\n    }\n\n    updateRetailer() {\n        LoadingIndicatorService.getInstance().showLoadingIndicator();\n        const body = this._buildRetailerRequest();\n        this.retailerSub = this.where2SpendServices.retriveRetailerLocation(body).subscribe((res) => {\n            if (res && res.response && res.response.retailers) {\n                if (Array.isArray(res.response.retailers)) {\n                    this.retailers = res.response.retailers.sort(this._alphabetSortFn.bind(this));\n                }\n            }\n        }, (error) => {\n            LoadingIndicatorService.getInstance().hideLoadingIndicator();\n        }, () => {\n            LoadingIndicatorService.getInstance().hideLoadingIndicator();\n        })\n    }\n\n    private _buildAdressLine(store) {\n        return store.addressLine1;\n    }\n\n    private _handleError(res) {\n        LoadingIndicatorService.getInstance().hideLoadingIndicator();\n        let msg = DEFAULT_ERROR_MSG;\n        try {\n            let body = JSON.parse(res._body);\n            msg = body.errors[0].message;\n        } catch (e) {\n            msg = DEFAULT_ERROR_MSG;\n        }\n        this._showError(msg);\n    }\n\n    private _showError(message) {\n        ToastMessageService.getInstance().showToastMessage(message);\n    }\n\n    private _buildRetailerRequest(): RetriveRetailerRequest {\n        const scheme = (this.card && this.card.scheme) ? this.card.scheme : undefined;\n        const req: RetriveRetailerRequest = {\n            requestType: ONLINE,\n            scheme: scheme\n        }\n\n        return req;\n    }\n\n    private _resetData() {\n    }\n\n    private _buildCategoryOpt() {\n        return undefined;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/spa/+screens/whereToSpend/where2SpendOnline/where2SpendOnline.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { Where2SpendOnlinePage } from './where2SpendOnline';\n\n@NgModule({\n  declarations: [Where2SpendOnlinePage],\n  imports: [IonicPageModule.forChild(Where2SpendOnlinePage)],\n  exports: [Where2SpendOnlinePage]\n})\nexport class Where2SpendOnlinePageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/spa/+screens/whereToSpend/where2SpendOnline/where2SpendOnline.module.ts","import { BehaviorSubject } from \"rxjs/BehaviorSubject\";\r\nimport { Subject } from 'rxjs/Subject';\r\n\r\nexport class Where2SpendSharingDataService {\r\n\r\n    private static _instance: Where2SpendSharingDataService;\r\n    \r\n    categories: any;\r\n    selectedCard: any;\r\n    useMyLocation: any;\r\n    currenrLocation: any;\r\n    keepLocation: any;\r\n    keepData: any;\r\n    refreshCategory: any;\r\n    gpsStatus: any;\r\n    needBackToYOurCardDetail: boolean = false;\r\n    pickupAddress: string;\r\n\r\n    updateEvent$: Subject<any> = new Subject();\r\n\r\n    set needBackToYOurCard(status) {\r\n        this.needBackToYOurCardDetail =  status;\r\n    }\r\n\r\n    get needBackToYOurCard() {\r\n        return this.needBackToYOurCardDetail;\r\n    }\r\n\r\n    resetState() {\r\n        this.categories = null;\r\n        this.selectedCard = null;\r\n        this.useMyLocation = true;\r\n        this.currenrLocation = false;\r\n        this.keepLocation = false;\r\n        this.keepData = false;\r\n        this.refreshCategory = false;\r\n        this.gpsStatus = false;\r\n        this.needBackToYOurCardDetail = false;\r\n    }\r\n\r\n    static getInstance(): Where2SpendSharingDataService {\r\n        if(!Where2SpendSharingDataService._instance){\r\n            Where2SpendSharingDataService._instance = new Where2SpendSharingDataService();\r\n        }\r\n        return Where2SpendSharingDataService._instance ;\r\n    }\r\n\r\n    constructor(\r\n    ) {\r\n    }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/spa/+screens/whereToSpend/where2SpendSharingData.services.ts","import { HttpService } from './../../framework/services/httpService/http.service';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { BehaviorSubject } from \"rxjs/BehaviorSubject\";\n\nexport const CARD_INSTORE = 'CARD_INSTORE';\nexport const VOUCHER_INSTORE = 'VOUCHER_INSTORE';\nexport const ONLINE = 'ONLINE';\nexport const VIRTUAL_MASTERCARD = 'VIRTUAL_MASTERCARD';\n\n\nexport type RetriveRetailerRequestType = 'CARD_INSTORE'  | \n                                         'VOUCHER_INSTORE' | \n                                         'ONLINE' | \n                                         'VIRTUAL_MASTERCARD';\n\nexport interface CategoryOpt {\n  [x: string]: string\n}                                         \n\nexport interface RetriveRetailerRequest {\n  requestType: RetriveRetailerRequestType;\n  scheme?: string;\n  latitude?: string;\n  longitude?: string;\n  categories?: CategoryOpt[]\n  key?: string;\n}\n\n@Injectable()\nexport class Where2SpendServices {\n  constructor(\n    private http: HttpService\n  ) {\n  }\n\n  retriveRetailerLocation(body: RetriveRetailerRequest){\n    return this.http.post('card/where', body).share();\n  }\n\n  searchPostcodeAutoComplete(url: string): Observable<any> {\n    return this.http.getExternal(url);\n  }\n\n  lookUpAddress(url: string): Observable<any> {\n    return this.http.getExternal(url);\n  }\n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/spa/+screens/whereToSpend/where2Spend.services.ts"],"sourceRoot":""}