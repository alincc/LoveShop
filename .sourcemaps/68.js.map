{"version":3,"sources":["../../src/spa/+screens/benefits/exchange/exchang4SpendOnline/masterCardExchange/masterCardExchange.module.ts","../../src/spa/+screens/benefits/exchange/exchang4SpendOnline/masterCardExchange/masterCardExchange.ts","../../src/spa/+screens/benefits/exchange/exchang4SpendOnline/masterCardExchange/masterCardExchange.service.ts"],"names":[],"mappings":"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","file":"68.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MasterCardExchangePage } from './masterCardExchange';\n\n@NgModule({\n  declarations: [MasterCardExchangePage],\n  imports: [IonicPageModule.forChild(MasterCardExchangePage)],\n  exports: [MasterCardExchangePage]\n})\nexport class MasterCardExchangePageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/spa/+screens/benefits/exchange/exchang4SpendOnline/masterCardExchange/masterCardExchange.module.ts","import {Component, ElementRef, QueryList, ViewChild, ViewChildren} from '@angular/core';\nimport {AlertController, IonicPage, NavController, NavParams, TextInput} from 'ionic-angular';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {InAppBrowser} from \"@ionic-native/in-app-browser\";\nimport {RouteManagerService} from \"../../../../../framework/services/routeManager/routeManager.service\";\nimport {ToastMessageService} from \"../../../../../framework/services/toastMessageService/toastMessage.service\";\nimport {MasterCardExchangeService} from \"./masterCardExchange.service\";\nimport {LoadingIndicatorService} from \"../../../../../framework/services/loadingIndicatorService/loadingIndicator.service\";\nimport {requireValidator} from \"../../../../../framework/validations/validator-required.directive\";\nimport $ from 'jquery';\nimport {AppConfig as app} from \"../../../../../framework/appConfig\";\nimport {numericValidator} from \"../../../../../framework/validations/validator-numeric.directive\";\nimport {Observable} from 'rxjs/Observable';\nimport {Utils} from \"../../../../../framework/services/utilities/utilities\";\n\nconst BASE_URL = 'https://www.love2shop.co.uk';\nconst DEFAULT_ERROR_MSG = app.Configuration.HttpService.DEFAULT_ERROR_MSG;\n\n@IonicPage()\n@Component({\n  selector: 'page-masterCardExchange',\n  templateUrl: 'masterCardExchange.html',\n  providers: [\n    InAppBrowser,\n    MasterCardExchangeService\n  ]\n})\nexport class MasterCardExchangePage {\n  amountStr: string;\n  @ViewChild('amountInput') amountInput: ElementRef;\n  @ViewChild('amountInputAc') amountInputAc: ElementRef;\n\n  tAandCBaseUrl = 'https://www.love2shopbusiness.co.uk';\n  primaryCard: any;\n  targetCard: any;\n  readTAndC: any = false;\n  exchangeValue: any;\n  amount: any;\n  amountWidth: string;\n  feeMsg;\n  exchange_value_to_vmc;\n  how_much_to_transfer;\n  firstTouch: Boolean = false;\n  masterCardTypeSelected;\n\n  @ViewChildren(TextInput) textInputs: QueryList<TextInput>;\n\n\n  constructor(public routeManager: RouteManagerService,\n              public formBuilder: FormBuilder,\n              public navParams: NavParams,\n              public alertCtrl: AlertController,\n              public navCtrl: NavController,\n              private masterCardExchangeService: MasterCardExchangeService,\n              private iab: InAppBrowser) {\n    this.buildForm();\n  }\n\n  ionViewWillEnter() {\n\n    this.amount = '0';\n    this.amountWidth = '1em';\n    this.firstTouch = false;\n    this.getContentHardCode();\n    if (this.routeManager.ifNotLoggedInThenGoBackToLoginScreen() === false) {\n      if (this.navParams.get('primaryCard')) {\n        this.primaryCard = this.navParams.get('primaryCard');\n      }\n      if (this.navParams.get('targetCard')) {\n        this.targetCard = this.navParams.get('targetCard');\n      }\n\n      if (this.navParams.get('masterCardTypeSelected')) {\n        this.masterCardTypeSelected = this.navParams.get('masterCardTypeSelected');\n      }\n\n      if (this.navParams.get('feeMsg')) {\n        this.feeMsg = this.navParams.get('feeMsg');\n      }\n    }\n  }\n\n  goToTandC() {\n    if (this.targetCard && this.targetCard.customAttributes && this.targetCard.customAttributes.TERMS_URL) {\n      const url = this._normalizeUrl(this.targetCard.customAttributes.TERMS_URL);\n      const browser = this.iab.create(this.tAandCBaseUrl + this.targetCard.customAttributes.TERMS_URL, \"_system\", \"location=true\");\n    } else {\n      this._showError(DEFAULT_ERROR_MSG);\n    }\n  }\n\n\n  exchangeForm: FormGroup;\n  formErrors = {\n    'exchangeInput': ''\n  };\n\n  public buildForm() {\n    this.exchangeForm = this.formBuilder.group({\n      'exchangeInput': ['', [\n        requireValidator('exchangeInput'),\n        numericValidator()\n      ]],\n      'termCondition': [false, [\n        Validators.requiredTrue\n      ]]\n    });\n\n    this.exchangeForm.valueChanges.subscribe(data => this.onValueChanges(data));\n    this.onValueChanges();\n  }\n\n  onValueChanges(data?: any) {\n    if (!this.exchangeForm) {\n      return;\n    }\n    const form = this.exchangeForm;\n    for (let fieldError in this.formErrors) {\n      this.formErrors[fieldError] = '';\n      let control = form.get(fieldError);\n      if (control && control.dirty && !control.valid) {\n        this.formErrors[fieldError] = control.errors[Object.keys(control.errors)[0]];\n      }\n    }\n    if (this.textInputs) {\n      this.textInputs.forEach(input => input && input._inputUpdated && input._inputUpdated());\n    }\n  }\n\n\n  changeInput($event) {\n\n\n    let lengthInput = this.exchangeForm.value.exchangeInput.length;\n    if (lengthInput > 0) {\n      $('.inputAmount').children('input').width((lengthInput * 37) + 'px');\n      if (lengthInput > 2) {\n        $('.inputAmount').children('input').width((lengthInput * 26) + 'px');\n      }\n    } else {\n      $('.inputAmount').children('input').width('150px');\n      $('.inputAmount').children('.pound-icon').remove();\n    }\n\n    let poundIcon = $('.inputAmount').children('.pound-icon');\n    if (lengthInput > 0 && poundIcon.length < 1) {\n      $('.inputAmount').children('input').before('<span class=\"pound-icon\">£</span>');\n      $('.inputAmount').children('input').removeClass('m-l-26');\n      $('.inputAmount').children('.pound-icon').removeClass('icon-absolute');\n    }\n\n    if (lengthInput >= 7) {\n      $('.inputAmount').children('input').css('margin', 0);\n\n      if (screen.width < 768) {\n        $('.inputAmount').children('input').width('calc(100% - 26px)');\n        $('.inputAmount').children('input').addClass('m-l-26');\n        $('.inputAmount').children('.pound-icon').addClass('icon-absolute');\n      }\n    }\n    if (lengthInput >= 16) {\n      if (screen.width >= 768) {\n        $('.inputAmount').children('input').width('calc(100% - 26px)');\n        $('.inputAmount').children('input').addClass('m-l-26');\n        $('.inputAmount').children('.pound-icon').addClass('icon-absolute');\n      }\n    }\n  }\n\n\n  focusToInput() {\n    if (!this.firstTouch) {\n      this.showAlertWarning();\n    }\n  }\n\n\n  generateOrder() {\n\n    if (Utils.isNotNull(this.primaryCard.purchaseMasterCardFailureMessage) && (parseFloat(this.exchangeForm.value.exchangeInput) > parseFloat(this.primaryCard.balance))) {\n        ToastMessageService.getInstance().showToastMessage(this.primaryCard.purchaseMasterCardFailureMessage);\n    } else {\n      this.exchangeValue = {\n        \"propositionId\": this.primaryCard.propositionId,\n        \"paymentCardNumber\": this.primaryCard.cardNumber,\n        \"orderJourney\": \"MASTERCARD_PURCHASE\",\n        \"orderlines\": [{\n          \"productCode\": this.targetCard.productCode,\n          \"quantity\": 1,\n          \"loadAmount\": this.exchangeForm.value.exchangeInput\n        }]\n      };\n      LoadingIndicatorService.getInstance().showLoadingIndicator();\n      const observer = {\n        next: (res) => {\n          if (!res.ok) {\n            return;\n          }\n          let body = res.response;\n\n          this.navCtrl.push('OrderMasterCardExchangeStep1', {\n            orderInforAfterGenerate: body,\n            primaryCard: this.primaryCard,\n            masterCardTypeSelected: this.masterCardTypeSelected\n          });\n\n        },\n        error: (error) => {\n          LoadingIndicatorService.getInstance().hideLoadingIndicator();\n        },\n        complete: () => {\n          LoadingIndicatorService.getInstance().hideLoadingIndicator();\n        }\n      };\n      this.masterCardExchangeService\n        .generateOrder(this.exchangeValue)\n        .subscribe(observer);\n    }\n  }\n\n\n  public getContentHardCode() {\n    LoadingIndicatorService.getInstance().showLoadingIndicator();\n    const observer = {\n      next: (res) => {\n        if (Utils.isNotNull(res[0]) && Utils.isNotNull(res[0].response) && Utils.isNotNull(res[0].response.message)) {\n          this.exchange_value_to_vmc = res[0].response.message;\n        }\n\n        if (Utils.isNotNull(res[1]) && Utils.isNotNull(res[1].response) && Utils.isNotNull(res[1].response.message)) {\n          this.how_much_to_transfer = res[1].response.message;\n        }\n\n      },\n      error: (error) => {\n        LoadingIndicatorService.getInstance().hideLoadingIndicator();\n      },\n      complete: () => {\n        LoadingIndicatorService.getInstance().hideLoadingIndicator();\n      }\n    };\n    Observable.combineLatest(\n      this.masterCardExchangeService.getContentFromRetreiveContent(\"exchange-value-to-vmc\"),\n      this.masterCardExchangeService.getContentFromRetreiveContent(\"how-much-to-transfer\"),\n    ).subscribe(observer)\n  }\n\n  showAlertWarning() {\n    let alertWarning = this.alertCtrl.create({\n      cssClass: 'l2s-alert--default l2s-alert--centered',\n      title: 'Got something in mind?',\n      message: `Please add any extra charges for delivery etc to your transfer amount. Most retailers will only accept a single payment method.`,\n      buttons: [{\n        text: 'Ok got it',\n        handler: data => {\n          this.firstTouch = true;\n        }\n      }]\n    });\n    alertWarning.present();\n  }\n\n  private _showError(message) {\n    ToastMessageService.getInstance().showToastMessage(message);\n  }\n\n  private _normalizeUrl(url) {\n    if (url.startsWith('#') || url.startsWith('/#')) {\n      return;\n    }\n\n    if (!url.startsWith('http://') && !url.startsWith('https://')) {\n      if (url.startsWith('/')) {\n        return BASE_URL + url;\n      }\n      return 'http://' + url;\n    }\n\n    return url;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/spa/+screens/benefits/exchange/exchang4SpendOnline/masterCardExchange/masterCardExchange.ts","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport {HttpService} from \"../../../../../framework/services/httpService/http.service\";\n\n@Injectable()\nexport class MasterCardExchangeService {\n  constructor(private http: HttpService) {\n  }\n\n  generateOrder(orderInfor): Observable<any> {\n    return this.http.post(\"order\", orderInfor);\n  }\n\n  getContentFromRetreiveContent(code): Observable<any> {\n    return this.http.get('cms/message/code=' + code);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/spa/+screens/benefits/exchange/exchang4SpendOnline/masterCardExchange/masterCardExchange.service.ts"],"sourceRoot":""}