{"version":3,"sources":["../../src/spa/+screens/benefits/exchange/exchange4DiningECode/exchange4DiningECode.module.ts","../../src/spa/models/card-type.ts","../../src/spa/+screens/benefits/benefitsData.service.ts","../../src/spa/+screens/benefits/exchange/exchange4DiningECode/exchange4DiningECode.ts","../../src/spa/+screens/benefits/exchange/exchange4DiningECode/exchange4DiningECode.service.ts"],"names":[],"mappings":"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","file":"36.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { Exchange4DiningECodePage } from './exchange4DiningECode';\n\n@NgModule({\n  declarations: [Exchange4DiningECodePage],\n  imports: [IonicPageModule.forChild(Exchange4DiningECodePage)],\n  exports: [Exchange4DiningECodePage]\n})\nexport class Exchange4DiningECodePageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/spa/+screens/benefits/exchange/exchange4DiningECode/exchange4DiningECode.module.ts","export class CardType {\n  static FLEXECASH = 'FLEXECASH';\n  static FLEXECODE = 'FLEXECODE_2.0';\n  static PMASTERCARD = 'PMASTERCARD';\n  static TESCO = 'TESCO';\n  static SAINSBURYS = 'SAINSBURYS';\n  static MASTERCARD = 'MASTERCARD';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/spa/models/card-type.ts","export class BenefitsDataService {\r\n    static _instance: BenefitsDataService;\r\n\r\n    static getInstance(): BenefitsDataService {\r\n        if (!this._instance) {\r\n            this._instance = this.createInstance();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    static createInstance(): BenefitsDataService {\r\n        return new BenefitsDataService();\r\n    }\r\n\r\n    private _currentCardNumber: string;\r\n    ignoreCheckBenefits: boolean;\r\n\r\n    constructor() {\r\n        this.currentCardNumber = null;\r\n    }\r\n\r\n    get currentCardNumber(): string {\r\n        return this._currentCardNumber;\r\n    }\r\n\r\n    set currentCardNumber(value: string) {\r\n        this._currentCardNumber = value;\r\n    }\r\n\r\n    private _needBackToExchange = {\r\n        needBackToExchange: false,\r\n        currentIndex: null,\r\n    };\r\n\r\n    setNeedBackToExchange(status, index) {\r\n        this._needBackToExchange.needBackToExchange = status;\r\n        this._needBackToExchange.currentIndex = index;\r\n    }\r\n\r\n    getNeedBackToExchange() {\r\n        return this._needBackToExchange;\r\n    }\r\n\r\n    resetNeedBackToExchange() {\r\n        this._needBackToExchange = {\r\n            needBackToExchange: false,\r\n            currentIndex: null,\r\n        };\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/spa/+screens/benefits/benefitsData.service.ts","import {Component} from '@angular/core';\nimport {AlertController, IonicPage, NavController, NavParams} from 'ionic-angular';\nimport {CatalogueTypes, Exchange4DiningECodeService, RequestRetrieveCatalogue} from \"./exchange4DiningECode.service\";\nimport {ToastMessageService} from \"../../../../framework/services/toastMessageService/toastMessage.service\";\nimport {LoadingIndicatorService} from \"../../../../framework/services/loadingIndicatorService/loadingIndicator.service\";\nimport {RouteManagerService} from \"../../../../framework/services/routeManager/routeManager.service\";\nimport {MyShoppingBasketSharingDataService} from \"../../../myShoppingBasket/myShoppingBasketSharingData.services\";\nimport {AppConfig as app} from \"../../../../framework/appConfig\";\nimport {CardType} from \"../../../../models/card-type\";\nimport $ from 'jquery';\nimport {BenefitsDataService} from \"../../benefitsData.service\";\nimport {YourCardDetailsSharingDataService} from \"../../../CardManagement/cardDetails/yourCardDetails/yourCardDetailsSharingData.services\";\nconst DEFAULT_ERROR_MSG = app.Configuration.HttpService.DEFAULT_ERROR_MSG;\n\n@IonicPage()\n@Component({\n    selector: 'page-exchange4DiningECode',\n    templateUrl: 'exchange4DiningECode.html',\n    providers: [\n        Exchange4DiningECodeService\n    ]\n})\nexport class Exchange4DiningECodePage {\n    category: any;\n    benefit: any;\n    categoryName: string = 'Exchange for dining e-codes';\n\n    _getCardsSub: any;\n    card: any;\n    noContent = false;\n    products: any;\n    catalogue: any;\n    productsOnBasket = 0;\n    baseResourceUrl;\n    cardIndex = 0;\n\n    constructor(public routeManager: RouteManagerService,\n                public alertCtrl: AlertController,\n                public navParams: NavParams,\n                public navCtrl: NavController,\n                public exchange4DiningECodeService: Exchange4DiningECodeService) {\n        this.baseResourceUrl = app.Configuration.HttpService.baseResourceUrl;\n    }\n\n    ionViewWillEnter() {\n        this._resetData();\n        if (this.routeManager.ifNotLoggedInThenGoBackToLoginScreen() === false) {\n            $('.app-root').removeClass('not-show-tab');\n            if (this.navParams.get('benefit')) {\n                this.benefit = this.navParams.get('benefit');\n            }\n            if (this.navParams.get('card')) {\n                let card = this.navParams.get('card');\n                this.card = YourCardDetailsSharingDataService.getInstance()\n                        .getLatestCardInfoFromHomeSharing(card);\n            }\n\n            if (this.navParams.get('cardIndex')) {\n                this.cardIndex = this.navParams.get('cardIndex');\n            }\n\n            if (this.navParams.get('catalogues')) {\n                const catalogues = this.navParams.get('catalogues');\n                this.products = this._extractsCardFromCatalogues(catalogues);\n            }\n        }\n    }\n\n    get4LastDigitsCardNumber(card) {\n        let cardNumber = null;\n        if (card.cardType === CardType.FLEXECODE) {\n            cardNumber = card.cardId;\n        } else {\n            cardNumber = card.cardNumber;\n        }\n\n        if (!cardNumber) {\n            return null;\n        }\n\n        if (card.cardType === CardType.FLEXECODE && cardNumber.indexOf('-') > 0) {\n            cardNumber = cardNumber.replace(/-/g, \"\");\n        }\n        return cardNumber.substr(cardNumber.length - 4);\n    }\n\n    ionViewDidLeave() {\n        this._unsubscribe();\n    }\n\n    ionViewDidEnter() {\n        this.calculateProductOnbasket();\n    }\n\n    calculateProductOnbasket() {\n        this.productsOnBasket = 0;\n        let dataBasket = MyShoppingBasketSharingDataService.getInstance().getDataBasket();\n\n        for (let i = 0; i < (<any>dataBasket).productsOnBasket.length; i++) {\n            this.productsOnBasket += parseInt(dataBasket.productsOnBasket[i].quantity);\n        }\n    }\n\n    gotoAllBarOneCode(product) {\n        this.navCtrl.push('ExchangeEcodeAllBarOneEcodePage', {\n            ecode: product,\n            primaryCard: this.card,\n            catalogue: this.catalogue\n        });\n    }\n\n    gotoTopUp() {\n        this.navCtrl.push(\"AmountTopUpPage\", {\n            cardSelected: this.card,\n            cardIndex: this.cardIndex\n        });\n        let currentIndexStack = this.navCtrl.getActive().index;\n        BenefitsDataService.getInstance().setNeedBackToExchange(true, currentIndexStack);\n    }\n\n    private _resetData() {\n        this.products = [];\n        this.benefit = null;\n        this.catalogue = null;\n        this.catalogue = null;\n        this.noContent = false;\n        this.productsOnBasket = 0;\n    }\n\n    private _buildCatalogueRequest(): RequestRetrieveCatalogue {\n        const catalogueType = CatalogueTypes.PRODUCT;\n        const body: RequestRetrieveCatalogue = {\n            propositionId: this.card.propositionId,\n            productCode: this.card.productCode,\n            series: this.card.series,\n            scheme: this.card.scheme,\n            url: this.benefit.url,\n            catalogueType: catalogueType\n        }\n        return body;\n    }\n\n    private _extractsCardFromCatalogues(catalogues) {\n        let products = [];\n        if (Array.isArray(catalogues)) {\n            for (let i = 0; i < catalogues.length; i++) {\n                let catalogue = catalogues[i];\n                if (Array.isArray(catalogue.categories)) {\n                    for (let j = 0; j < catalogue.categories.length; j++) {\n                        let category = catalogue.categories[j];\n                        category.image = this._selectCategoryImage(category);\n                        if (category.name.toLowerCase() == this.categoryName.toLowerCase()) {\n                            this.catalogue = catalogue;\n                            this.category = category;\n                            if (Array.isArray(category.subCategories)) {\n                                for (let k = 0; k < category.subCategories.length; k++) {\n                                    let subCategory = category.subCategories[k];\n                                    subCategory.image = this._selectCategoryImage(subCategory);\n                                    if (Array.isArray(subCategory.products)) {\n                                        for (let l = 0; l < subCategory.products.length; l++) {\n                                            subCategory.products[l].benefit = this.benefit;\n                                            subCategory.products[l].subCategory = subCategory;\n                                            subCategory.products[l].category = category;\n                                            subCategory.products[l].catalogue = catalogue;\n                                        }\n                                    }\n                                }\n                                products = category.subCategories;\n\n                            } else if (Array.isArray(category.products)) {\n                                products = category.products;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        return products;\n    }\n\n    private _selectCategoryImage(cat: any) {\n        if (cat.smallImages && Array.isArray(cat.smallImages) && cat.smallImages[0]) {\n            return cat.smallImages[0]\n        }\n        return null;\n    }\n\n    private _handleError(res) {\n        LoadingIndicatorService.getInstance().hideLoadingIndicator();\n        let msg = DEFAULT_ERROR_MSG;\n        try {\n            let body = JSON.parse(res._body);\n            msg = body.errors[0].message;\n        } catch (e) {\n            msg = DEFAULT_ERROR_MSG;\n        }\n        this._showError(msg);\n    }\n\n    private _showError(message) {\n        ToastMessageService.getInstance().showToastMessage(message);\n    }\n\n    _buildCatague(catalogue) {\n        catalogue.displayFee = this._selectDisplayFee(catalogue);\n        return catalogue;\n    }\n\n    private _selectDisplayFee(card) {\n        if (!card || !card.discountPercentage) {\n            return '0';\n        }\n        return card.discountPercentage;\n    }\n\n\n    private _unsubscribe() {\n        if (this._getCardsSub) {\n            this._getCardsSub.unsubscribe();\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/spa/+screens/benefits/exchange/exchange4DiningECode/exchange4DiningECode.ts","import { Injectable } from \"@angular/core\";\nimport { Observable } from \"rxjs/Observable\";\nimport { AppConfig } from \"../../../../framework/appConfig\";\nimport {HttpService} from \"../../../../framework/services/httpService/http.service\";\n\nexport const CatalogueTypes = {\n    PRODUCT: 'P',\n    PERSONALISATION: 'S',\n    FULFILMENT: 'F'\n}\n\nexport interface RequestRetrieveCatalogue {\n    propositionId?: string;\n    scheme?: string;\n    series?: string;\n    productCode?: string;\n    catalogueType: string;\n    url?: string;\n}\n\n@Injectable()\nexport class Exchange4DiningECodeService {\n  constructor(\n      private http: HttpService\n  ) {\n  }\n\n  getRetrieveCatalogue(body: RequestRetrieveCatalogue): Observable<any> {\n      return this.http.post(`card/catalogue`, body);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/spa/+screens/benefits/exchange/exchange4DiningECode/exchange4DiningECode.service.ts"],"sourceRoot":""}